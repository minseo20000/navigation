<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Naver Map Directions</title>
  <script src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=bj73jhgjq2"></script>
</head>
<body>
  <div id="map" style="width:100%;height:500px;"></div>
  <script>
    var map = new naver.maps.Map('map', {
      center: new naver.maps.LatLng(37.554722, 126.925000), // 중심 좌표를 중간 위치로 설정
      zoom: 15
    });

    var placesService = new naver.maps.Service();

    // 장소 이름을 통해 위치 찾기
    function getLatLngFromPlace(placeName, callback) {
      naver.maps.Service.geocode({
        query: placeName
      }, function(status, response) {
        if (status !== naver.maps.Service.Status.OK) {
          return alert('Place search error: ' + placeName);
        }
        if (response.v2.meta.totalCount === 0) {
          return alert('No result: ' + placeName);
        }

        var item = response.v2.addresses[0];
        var point = new naver.maps.LatLng(item.y, item.x);
        callback(point);
      });
    }

    // 시작 장소와 도착 장소
    var startPlace = '홍익대학교 정문'; // 홍익대학교 정문
    var endPlace = '홍대입구역 9번 출구'; // 홍대입구역 9번 출구

    // 경로 설정
    function setRoute(start, end) {
      var markerStart = new naver.maps.Marker({
        position: start,
        map: map,
        title: '홍익대학교 정문'
      });

      var markerEnd = new naver.maps.Marker({
        position: end,
        map: map,
        title: '홍대입구역 9번 출구'
      });

      var directionsService = new naver.maps.DirectionsService();

      directionsService.route({
        start: start,
        goal: end,
        option: naver.maps.DirectionsService.Option.WALKING // 도보 경로 설정
      }, function(status, response) {
        if (status !== naver.maps.DirectionsService.Status.OK) {
          return alert('경로를 불러오는 데 실패했습니다.');
        }

        var route = response.route.traoptimal[0];
        var path = route.path.map(function(point) {
          return new naver.maps.LatLng(point[1], point[0]);
        });

        var polyline = new naver.maps.Polyline({
          map: map,
          path: path,
          strokeColor: '#5347AA',
          strokeWeight: 6
        });
      });
    }

    // 장소를 통한 경로 설정
    getLatLngFromPlace(startPlace, function(start) {
      getLatLngFromPlace(endPlace, function(end) {
        setRoute(start, end);
      });
    });
  </script>
</body>
</html>
